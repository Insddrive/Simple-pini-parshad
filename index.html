<!DOCTYPE html>
<html lang="pa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMOLED ਕੈਲਕੂਲੇਟਰ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ਇੰਟਰ ਫੌਂਟ ਅਤੇ ਬੇਸ ਸਟਾਈਲ */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            /* ਕੀ-ਬੋਰਡ ਨੂੰ ਪੂਰੀ ਤਰ੍ਹਾਂ ਬੰਦ ਕਰਨ ਲਈ ਟੱਚ ਐਕਸ਼ਨ ਨੂੰ ਰੋਕੋ */
            touch-action: manipulation;
            /* ਯੂਜ਼ਰ ਵੱਲੋਂ ਟੈਕਸਟ ਸਲੈਕਟ ਕਰਨ ਨੂੰ ਰੋਕੋ (ਇਨਪੁਟ ਤੋਂ ਇਲਾਵਾ) */
            user-select: none;
        }
        /* ਫੋਕਸ ਹੋਣ 'ਤੇ ਇਨਪੁਟ ਬਾਕਸ ਨੂੰ ਨੀਲਾ ਬਾਰਡਰ ਦਿਖਾਓ */
        .calc-input:focus {
            outline: none;
            border-color: #3b82f6; /* blue-500 */
            box-shadow: 0 0 0 1px #3b82f6; /* ਫੋਕਸ ਗਲੋ */
        }
        /* readonly ਇਨਪੁਟ 'ਤੇ ਡਿਫਾਲਟ ਕਰਸਰ ਦਿਖਾਓ */
        .calc-input[readonly] {
            cursor: default;
        }
        /* ਨੰਬਰ ਪੈਡ ਬਟਨਾਂ 'ਤੇ ਐਕਟਿਵ ਸਟੇਟ */
        .keypad-btn:active {
            transform: scale(0.95);
            background-color: #4b5563; /* gray-600 */
        }
        .keypad-btn-special:active {
            transform: scale(0.95);
            background-color: #6b7280; /* gray-500 */
        }
    </style>
</head>
<body class="bg-black flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md mx-auto">
        
        <h1 class="text-3xl font-bold text-center text-gray-100 mb-6">ਕਸਟਮ ਕੈਲਕੂਲੇਟਰ</h1>

        <!-- ਪਹਿਲੀ ਕੈਲਕੂਲੇਸ਼ਨ (ਨਤੀਜਾ ਉੱਪਰ) -->
        <div class="bg-gray-900 border border-gray-800 p-4 rounded-2xl shadow-xl mb-4 overflow-x-auto">
            <!-- ਨਤੀਜਾ 1 (ਉੱਪਰ) -->
            <div class="text-right text-3xl font-bold text-green-500 mb-2">
                = <span id="result1">351</span>
            </div>
            <!-- ਕੈਲਕੂਲੇਸ਼ਨ 1 (ਇੱਕ ਲਾਈਨ) -->
            <div class="flex items-center justify-center space-x-1 text-lg whitespace-nowrap">
                <span class="text-gray-400">(</span>
                <span class="font-bold text-white">151</span>
                <span class="text-gray-400">x</span>
                <!-- ਬਦਲਿਆ ਹੋਇਆ ਇਨਪੁਟ ਬਾਕਸ -->
                <input type="text" inputmode="none" id="inputB" value="1" class="calc-input w-16 px-2 py-1 text-center font-bold text-white bg-gray-800 border-2 border-gray-700 rounded-md transition-all" readonly>
                <span class="text-gray-400">)</span>
                <span class="text-gray-400">+</span>
                <span class="text-gray-400">(</span>
                <span class="font-bold text-white">20</span>
                <span class="text-gray-400">x</span>
                <!-- ਬਦਲਿਆ ਹੋਇਆ ਇਨਪੁਟ ਬਾਕਸ -->
                <input type="text" inputmode="none" id="inputD" value="10" class="calc-input w-16 px-2 py-1 text-center font-bold text-white bg-gray-800 border-2 border-gray-700 rounded-md transition-all" readonly>
                <span class="text-gray-400">)</span>
            </div>
        </div>

        <!-- ਦੂਜੀ ਕੈਲਕੂਲੇਸ਼ਨ (ਨਤੀਜਾ ਲੁਕਾਉਣ ਵਾਲੀ) -->
        <div class="bg-gray-900 border border-gray-800 p-4 rounded-2xl shadow-xl mb-6">
            <div class="flex items-center justify-center space-x-2 text-xl whitespace-nowrap">
                <!-- ਨਤੀਜੇ ਦੇ ਹਿੱਸੇ -->
                <span id="part1_display" class="font-bold text-green-500">151</span>
                <span class="text-gray-400">+</span>
                <span id="part2_display" class="font-bold text-green-500">200</span>
                <!-- ਘਟਾਓ ਦਾ ਹਿੱਸਾ -->
                <span class="text-gray-400">-</span>
                <input type="text" inputmode="none" id="inputE" value="500" class="calc-input w-24 px-2 py-1 text-center font-bold text-white bg-gray-800 border-2 border-gray-700 rounded-md transition-all" readonly>
                
                <!-- ਆਖਰੀ ਨਤੀਜੇ ਨੂੰ ਇੱਕ 'wrapper' ਵਿੱਚ ਪਾਓ -->
                <span id="final_result_wrapper" class="hidden"> <!-- ਡਿਫਾਲਟ 'hidden' (ਲੁਕਿਆ) -->
                    <span class="text-gray-400">=</span>
                    <span id="result2" class="font-bold text-red-500">-149</span>
                </span>
            </div>
        </div>

        <!-- ਨੰਬਰ ਪੈਡ (ਸਲੇਟੀ ਬਟਨਾਂ ਨਾਲ ਅੱਪਡੇਟ ਕੀਤਾ ਗਿਆ) -->
        <div id="keypad" class="grid grid-cols-3 gap-3 bg-gray-900 border border-gray-800 p-4 rounded-2xl shadow-xl">
            <!-- ਬਟਨ ਉਸੇ ਤਰ੍ਹਾਂ ਰਹਿਣਗੇ -->
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">7</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">8</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">9</button>
            
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">4</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">5</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">6</button>
            
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">1</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">2</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">3</button>
            
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-150">.</button>
            <button class="keypad-btn py-4 text-3xl font-bold text-white bg-gray-800 hover:bg-gray-700 rounded-lg shadow-md transition-all duration-1A50">0</button>
            <button id="backspace" class="keypad-btn-special py-4 text-3xl font-bold text-white bg-gray-700 hover:bg-gray-600 rounded-lg shadow-md transition-all duration-150">⌫</button>
            
            <button id="clear" class="keypad-btn-special col-span-3 py-4 text-3xl font-bold text-white bg-gray-700 hover:bg-gray-600 rounded-lg shadow-md transition-all duration-150">C</button>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ਇਨਪੁਟ ਫੀਲਡ
            const inputB = document.getElementById('inputB');
            const inputD = document.getElementById('inputD');
            const inputE = document.getElementById('inputE');
            const editableInputs = [inputB, inputD, inputE];

            // ਨਤੀਜਾ ਫੀਲਡ
            const result1 = document.getElementById('result1');
            const part1_display = document.getElementById('part1_display'); 
            const part2_display = document.getElementById('part2_display'); 
            const result2 = document.getElementById('result2');
            const final_result_wrapper = document.getElementById('final_result_wrapper'); 
            const keypad = document.getElementById('keypad');

            // --- ਸੁਰੱਖਿਆ ਜਾਂਚ ---
            if (!inputB || !inputD || !inputE || !result1 || !part1_display || !part2_display || !result2 || !final_result_wrapper || !keypad) {
                console.error("ਇੱਕ ਜਾਂ ਵੱਧ ਜ਼ਰੂਰੀ HTML ਤੱਤ (elements) ਨਹੀਂ ਮਿਲੇ। ਕਿਰਪਾ ਕਰਕੇ ID ਦੀ ਜਾਂਚ ਕਰੋ।");
                return; 
            }
            // --- ਜਾਂਚ ਖਤਮ ---

            let currentFocusedInput = null; 
            let isOverwriteHead = false;
            let hasEditedInputE = false; 

            const valA = 151;
            const valC = 20;

            function calculate() {
                const valB = parseFloat(inputB.value) || 0;
                const valD = parseFloat(inputD.value) || 0;
                const valE = parseFloat(inputE.value) || 0;

                const part1 = valA * valB;
                const part2 = valC * valD;
                const res1 = part1 + part2;
                const res2 = res1 - valE;

                result1.textContent = formatNumber(res1);
                part1_display.textContent = formatNumber(part1); 
                part2_display.textContent = formatNumber(part2); 
                result2.textContent = formatNumber(res2);

                if (hasEditedInputE) {
                    final_result_wrapper.classList.remove('hidden');
                } else {
                    final_result_wrapper.classList.add('hidden');
                }
            }
            
            function resetCalculator() {
                inputB.value = '0'; 
                inputD.value = '0'; 
                inputE.value = '0'; 
                
                hasEditedInputE = false; 
                
                calculate(); 
                
                if(currentFocusedInput) {
                    currentFocusedInput.blur(); 
                }
                currentFocusedInput = null; 
                isOverwriteHead = false; 
            }

            function formatNumber(num) {
                if (Number.isInteger(num)) {
                    return num.toString();
                }
                return (Math.round(num * 100) / 100).toString();
            }

            editableInputs.forEach(input => {
                input.addEventListener('focus', () => {
                    currentFocusedInput = input;
                    input.select(); 
                    isOverwriteHead = true; 
                });

                input.addEventListener('contextmenu', (e) => {
                    e.preventDefault(); 
                });
            });

            keypad.addEventListener('click', (e) => {
                if (!e.target.matches('button')) return; 

                const key = e.target.textContent;

                if (key === 'C') {
                    resetCalculator();
                    return; 
                }

                if (!currentFocusedInput) {
                    currentFocusedInput = inputB;
                    currentFocusedInput.focus();
                }
                
                if (currentFocusedInput.id === 'inputE') {
                    hasEditedInputE = true;
                }

                if (key === '⌫') {
                    if (isOverwriteHead) {
                        currentFocusedInput.value = '0';
                    } else {
                        currentFocusedInput.value = currentFocusedInput.value.slice(0, -1);
                    }
                    if (currentFocusedInput.value === '') {
                        currentFocusedInput.value = '0';
                    }
                    isOverwriteHead = false;
                } else {
                    if (isOverwriteHead) {
                        currentFocusedInput.value = (key === '.') ? '0.' : key;
                        isOverwriteHead = false;
                    } else {
                        if (currentFocusedInput.value === '0' && key !== '.') {
                            currentFocusedInput.value = key;
                        } else if (key === '.' && currentFocusedInput.value.includes('.')) {
                            return;
                        } else {
                            currentFocusedInput.value += key;
                        }
                    }
                }
                
                calculate(); 
            });

            // ਸ਼ੁਰੂਆਤੀ ਲੋਡ
            inputB.value = '1';
            inputD.value = '10';
            inputE.value = '500';
            
            hasEditedInputE = true; 
            
            calculate(); 
        });
    </script>
</body>
</html>


